# Poll every 10 seconds
set daemon 10

# Monitor the server's PID file. Also poll http://127.0.0.1:80/ping to ensure that nginx itself is running.
check process nginx pidfile /var/run/nginx.pid
  start program = "/etc/init.d/nginx start"
  stop program = "/etc/init.d/nginx stop"
  if failed host 127.0.0.1 port 80 protocol http
    hostheader 'localhost'
    request "/ping"
    timeout 1 second
    for 3 cycles
    then restart
